<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Food Carnival 2025</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #ffecd2, #fcb69f);
      overflow-x: hidden;
      color: #2b2b2b;
    }

    header {
      background: #ff5733;
      color: white;
      padding: 20px;
      text-align: center;
      font-size: 2rem;
      position: sticky;
      top: 0;
      z-index: 10;
    }

    /* floating animated food icons */
    .float-icon {
      position: absolute;
      width: 80px;
      animation: drift 18s infinite linear;
      opacity: 0.8;
      pointer-events: none;
    }
    @keyframes drift {
      0% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-40vh) rotate(20deg); }
      100% { transform: translateY(-80vh) rotate(-20deg); }
    }

    /* container */
    .container {
      max-width: 900px;
      margin: 40px auto;
      padding: 20px;
    }

    /* menu cards */
    .menu-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
    }

    .card {
      background: white;
      border-radius: 16px;
      padding: 15px;
      text-align: center;
      box-shadow: 0 6px 14px rgba(0,0,0,0.15);
      transition: transform 0.3s ease;
    }
    .card:hover { transform: scale(1.06); }
    .card img { width: 100%; border-radius: 12px; height: 160px; object-fit: cover; }
    .card button {
      margin-top: 10px; width: 100%; padding: 10px; background: #ff5733; border: none; color: white; font-weight: bold; border-radius: 10px; cursor: pointer;
    }
    .card button:hover { background: #ff784e; }

    /* order popup */
    #orderPopup {
      position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.95);
      background: #fff3e6; padding: 20px; border-radius: 12px; box-shadow: 0 8px 20px rgba(0,0,0,0.2); width: 320px; display: none; z-index: 40;
    }
    #closeBtn { float: right; background: transparent; border: none; font-size: 20px; cursor: pointer; }

    /* poll & quiz */
    .section-card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 6px 14px rgba(0,0,0,0.12); margin-top: 30px; }
    .btn { display:inline-block; padding:10px 16px; border-radius:10px; border:none; cursor:pointer; }
    .pollBtn { background:#ff7043; color:white; margin:6px; }
    .pollBtn:hover { background:#ff5722; }
    .greenBtn { background:#4caf50; color:white; }

    /* gallery (placeholder styles if needed later) */
    .gallery-grid { display:grid; grid-template-columns:repeat(auto-fit, minmax(200px,1fr)); gap:15px; margin-top:12px; }
    .gallery-grid img { width:100%; border-radius:10px; height:160px; object-fit:cover; }

    /* reviews */
    .review { background:white; padding:12px; margin:10px auto; max-width:600px; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.08); text-align:left; }

    /* small responsive tweaks */
    @media (max-width:600px) {
      header { font-size:1.4rem; }
      .card img { height: 140px; }
    }
  </style>
</head>
<body>

<header>üçï Food Carnival 2025 üéâ</header>

<!-- floating icons -->
<img src="https://i.imgur.com/1Oe8Z46.png" class="float-icon" style="left:5%; bottom:-100px; animation-delay:0s;" />
<img src="https://i.imgur.com/bdVSHxL.png" class="float-icon" style="left:40%; bottom:-120px; animation-delay:4s;" />
<img src="https://i.imgur.com/0EwE0Hn.png" class="float-icon" style="right:10%; bottom:-140px; animation-delay:8s;" />

<div class="container">

  <h2 style="text-align:center; margin-bottom:8px;">Order Your Favorite Food</h2>
  <div class="menu-grid" id="menuGrid" aria-live="polite"></div>

  <!-- customer reviews -->
  <section id="reviews" style="margin-top:50px; text-align:center;">
    <h2>‚≠ê Customer Reviews</h2>

    <!-- Review List -->
    <div id="reviewList" style="margin-top:20px;"></div>

    <!-- Add Review Form -->
    <div style="margin-top:30px; max-width:600px; margin-inline:auto; background:white; padding:20px; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.1);">
      <h3>Add Your Review</h3>
      <input id="reviewName" placeholder="Your Name" style="width:100%; padding:10px; margin-top:10px; border-radius:8px; border:1px solid #ccc;">
      <textarea id="reviewText" placeholder="Your Review" style="width:100%; padding:10px; margin-top:10px; border-radius:8px; border:1px solid #ccc; height:80px;"></textarea>
      <select id="reviewRating" style="width:100%; padding:10px; margin-top:10px; border-radius:8px; border:1px solid #ccc;">
        <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</option>
        <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê</option>
        <option value="3">‚≠ê‚≠ê‚≠ê</option>
        <option value="2">‚≠ê‚≠ê</option>
        <option value="1">‚≠ê</option>
      </select>
      <button id="submitReview" style="margin-top:15px; padding:10px 20px; border:none; background:#ff914d; color:white; border-radius:8px; cursor:pointer;">Submit Review</button>
    </div>
  </section>

  <!-- Poll / Quiz Sections -->
  <section id="pollSection" class="section-card" style="text-align:center;">
    <h3>üìä Food Poll</h3>
    <p>Which type of food do you love the most?</p>

    <div>
      <button class="btn pollBtn" data-vote="Indian">Indian</button>
      <button class="btn pollBtn" data-vote="Chinese">Chinese</button>
      <button class="btn pollBtn" data-vote="Italian">Italian</button>
      <button class="btn pollBtn" data-vote="Desserts">Desserts</button>
    </div>

    <div id="pollResults" style="margin-top:16px; font-weight:700;"></div>
  </section>

  <section id="quizSection" class="section-card" style="text-align:center;">
    <h3>‚ùì Food Quiz</h3>
    <p id="quizQuestion" style="font-size:18px; font-weight:700;"></p>
    <div id="quizOptions" style="margin-top:12px;"></div>
    <p id="quizFeedback" style="font-size:16px; margin-top:12px; font-weight:700;"></p>
    <button id="nextBtn" class="btn greenBtn" style="display:none; margin-top:12px;">Next</button>
  </section>

</div>

<!-- order popup -->
<div id="orderPopup" role="dialog" aria-modal="true" aria-hidden="true">
  <button id="closeBtn" aria-label="Close">‚úñ</button>
  <h3 id="popupFood">Food</h3>
  <label>Enter Quantity:</label>
  <input id="qtyInput" type="number" min="1" value="1" style="width:100%; padding:8px; border-radius:8px; margin:8px 0;">
  <button id="confirmBtn" style="width:100%; background:#ff5733; color:white; padding:10px; border:none; border-radius:10px;">Confirm Order</button>
  <p id="resultMsg" style="margin-top:10px; font-weight:600; color:green;"></p>
</div>

<script>
// All initialization inside DOMContentLoaded to avoid timing errors
window.addEventListener('DOMContentLoaded', () => {
  // --- Menu Cards & Popup Logic ---
  const foods = [
    { name: "Oreo Pudding", img: "https://i.imgur.com/0EwE0Hn.jpeg" },
    { name: "Crispy and Crunch Chaat", img: "https://i.imgur.com/bdVSHxL.png" },
    { name: "Pani Puri", img: "https://i.imgur.com/1Oe8Z46.png" },
    { name: "Semolina Ball", img: "https://i.imgur.com/4emDCnA.jpeg" },
    { name: "Arabian Pudding", img: "https://i.imgur.com/o8Vx9Ls.jpeg" },
    { name: "Shahi Tukda", img: "https://i.imgur.com/dlWED3c.jpeg" },
    { name: "Vermicelli Dessert", img: "https://i.imgur.com/JkY1ob6.jpeg" },
    { name: "Glass Petal Pudding", img: "https://i.imgur.com/kjEJzsc.jpeg" }
  ];

  const grid = document.getElementById('menuGrid');
  const popup = document.getElementById('orderPopup');
  const popupFood = document.getElementById('popupFood');
  const closeBtn = document.getElementById('closeBtn');
  const confirmBtn = document.getElementById('confirmBtn');
  const qtyInput = document.getElementById('qtyInput');
  const resultMsg = document.getElementById('resultMsg');
  let selectedFood = null;

  function openPopup(index) {
    selectedFood = foods[index];
    popupFood.textContent = selectedFood.name;
    resultMsg.textContent = '';
    qtyInput.value = 1;
    popup.style.display = 'block';
    popup.setAttribute('aria-hidden', 'false');
  }

  foods.forEach((item, i) => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `\n      <img src="${item.img}" alt="${item.name}" />\n      <h3>${item.name}</h3>\n      <button type=\"button\">Order Now</button>\n    `;

    const btn = card.querySelector('button');
    btn.addEventListener('click', () => openPopup(i));

    grid.appendChild(card);
  });

  if (closeBtn) closeBtn.addEventListener('click', () => { popup.style.display = 'none'; popup.setAttribute('aria-hidden', 'true'); selectedFood = null; });

  // Toast function
function showToast(msg){
  const t=document.getElementById('toast');
  t.textContent=msg;
  t.style.opacity='1';
  t.style.transform='translateY(0)';
  setTimeout(()=>{
    t.style.opacity='0';
    t.style.transform='translateY(20px)';
  }, 2000);
}

confirmBtn.addEventListener('click', () => {
    const qty = parseInt(qtyInput.value, 10) || 1;
    if (!selectedFood) {
      resultMsg.style.color = 'red';
      resultMsg.textContent = 'Please select an item before confirming.';
      return;
    }
    resultMsg.style.color = 'green';
    resultMsg.textContent = `‚úî Order placed: ${qty} √ó ${selectedFood.name}`;
    setTimeout(() => { popup.style.display = 'none'; popup.setAttribute('aria-hidden', 'true'); selectedFood = null; }, 900);
  });

  window.addEventListener('click', (e) => {
    if (e.target === popup) { popup.style.display = 'none'; popup.setAttribute('aria-hidden', 'true'); selectedFood = null; }
  });

  // --- Review System (localStorage) ---
  const reviewListEl = document.getElementById('reviewList');
  function loadReviews() {
    const reviews = JSON.parse(localStorage.getItem('reviews') || '[]');
    reviewListEl.innerHTML = '';
    reviews.forEach(r => {
      const card = document.createElement('div');
      card.className = 'review';
      card.innerHTML = `<p><strong>${escapeHtml(r.name)}:</strong> ${escapeHtml(r.text)} <span style=\"color:#ffb400;\">${'‚≠ê'.repeat(r.rating)}</span></p>`;
      reviewListEl.appendChild(card);
    });
  }

  function saveReview(review) {
    const existing = JSON.parse(localStorage.getItem('reviews') || '[]');
    existing.push(review);
    localStorage.setItem('reviews', JSON.stringify(existing));
  }

  document.getElementById('submitReview').addEventListener('click', () => {
    const name = document.getElementById('reviewName').value.trim();
    const text = document.getElementById('reviewText').value.trim();
    const rating = parseInt(document.getElementById('reviewRating').value, 10) || 5;
    if (!name || !text) { alert('Please enter name and review.'); return; }
    saveReview({ name, text, rating });
    document.getElementById('reviewName').value = '';
    document.getElementById('reviewText').value = '';
    loadReviews();
  });

  loadReviews();

  // --- Poll / Voting System ---
  const pollButtons = document.querySelectorAll('.pollBtn');
  const pollResultsEl = document.getElementById('pollResults');
  let pollData = JSON.parse(localStorage.getItem('pollData') || JSON.stringify({ Indian:0, Chinese:0, Italian:0, Desserts:0 }));

  pollButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      const key = btn.dataset.vote;
      if (key && pollData.hasOwnProperty(key)) {
        pollData[key]++;
        localStorage.setItem('pollData', JSON.stringify(pollData));
        renderPoll();
      }
    });
  });

  function renderPoll() {
    const total = Object.values(pollData).reduce((a,b) => a+b, 0) || 1;
    pollResultsEl.innerHTML = Object.entries(pollData).map(([k,v]) => {
      const pct = Math.round((v/total)*100);
      return `<div style=\"margin:6px 0;\"><strong>${k}:</strong> ${v} votes <span style=\"color:#777;\">(${pct}%)</span></div>`;
    }).join('');
  }

  renderPoll();

  // --- Quiz / Trivia Panel ---
  const quizData = [
    { q: "Which country invented Pizza?", options: ["India","Italy","China"], answer: 1 },
    { q: "Which fruit is known as the 'King of Fruits'?", options: ["Mango","Banana","Apple"], answer: 0 },
    { q: "What is sushi traditionally wrapped in?", options: ["Bread","Seaweed","Lettuce"], answer: 1 }
  ];

  let currentQ = 0;
  const quizQuestionEl = document.getElementById('quizQuestion');
  const quizOptionsEl = document.getElementById('quizOptions');
  const quizFeedbackEl = document.getElementById('quizFeedback');
  const nextBtn = document.getElementById('nextBtn');

  function loadQuestion() {
    quizFeedbackEl.textContent = '';
    nextBtn.style.display = 'none';
    const q = quizData[currentQ];
    quizQuestionEl.textContent = q.q;

    quizOptionsEl.innerHTML = '';
    q.options.forEach((opt, i) => {
      const b = document.createElement('button');
      b.className = 'btn pollBtn';
      b.type = 'button';
      b.textContent = opt;
      b.addEventListener('click', () => checkAnswer(i));
      quizOptionsEl.appendChild(b);
    });
  }

  function checkAnswer(selected) {
    const correct = quizData[currentQ].answer;
    if (selected === correct) {
      quizFeedbackEl.textContent = '‚úÖ Correct!';
    } else {
      quizFeedbackEl.textContent = '‚ùå Wrong!';
    }
    nextBtn.style.display = 'inline-block';
    currentQ = (currentQ + 1) % quizData.length;
  }

  nextBtn.addEventListener('click', loadQuestion);
  loadQuestion();

  // small helper to avoid XSS in review display
  function escapeHtml(str) {
    return String(str).replace(/[&<>\"'`]/g, (s) => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;","`":"&#96;"})[s]);
  }

}); // end DOMContentLoaded
</script>



<!-- Toast Notification -->
<div id="toast" style="position:fixed; bottom:20px; right:20px; background:#333; color:white; padding:12px 18px; border-radius:8px; opacity:0; transition:opacity .5s ease, transform .5s ease; transform:translateY(20px); z-index:200; font-weight:600;">
  Order Placed Successfully!
</div>

</body>
</html>
